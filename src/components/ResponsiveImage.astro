---
import type { PrimitiveImageResponsive } from 'src/types/global'

interface Props {
  sources: PrimitiveImageResponsive[]
  class: string | null | undefined
}

const { sources, class: className, ...props } = Astro.props

// De esta manera se evita enviar en un orden en especifico las imagenes.
const srcPrimaryImage = sources.find(img => img.type === 'xl')?.img?.src
const altPrimaryImage = sources.find(img => img.type === 'xl')?.img?.options?.alt
---

<picture class={className} {...props}>
  {
    sources.length >= 1 &&
      sources.map(image => <source media={image.breakpoint} srcset={image.img.src} />)
  }
  <img src={srcPrimaryImage} alt={altPrimaryImage} />
</picture>

<style>
  picture > img {
    width: 100%;
    height: 100%;
    object-fit: cover;
    filter: grayscale(100%) opacity(64%);
    mask-image: linear-gradient(to bottom, var(--background), transparent 100%);

    /* border: 5px dashed blue; */
  }
</style>
