---
import ArticleLayout from '@components/ArticleLayout.astro'
import BlogLayout from '@layouts/BlogLayout.astro'
import { render } from 'astro:content'
import { getCollection } from 'astro:content'

export async function getStaticPaths() {
  const articles = await getCollection('articles')

  return articles.map(article => {
    return {
      params: {
        slug: article.id,
      },
      props: {
        article,
      },
    }
  })
}

const { article } = Astro.props
const { Content } = await render(article)
const { title, date, authors, cover } = article.data
---

<BlogLayout pageTitle={title}>
  <ArticleLayout
    title={title}
    date={date}
    authors={authors}
    cover={{ src: cover.img, alt: cover.description }}>
    <Content />
  </ArticleLayout>
</BlogLayout>
